FROM alpine:3.21.3
RUN apk add nginx
COPY webserver_setup.sh /webserver_setup.sh
RUN chmod +x /webserver_setup.sh && /webserver_setup.sh

COPY index.html /www/index.html
COPY nginx.conf /etc/nginx/nginx.conf

# THESE LINES COPY CERTIFICATES ......
RUN mkdir -p /etc/nginx/ssl # Create a directory inside the container for the certs
COPY certs/nginx.crt /etc/nginx/ssl/nginx.crt
COPY certs/nginx.key /etc/nginx/ssl/nginx.key
# ---------------------------------------------

EXPOSE 443
CMD ["/usr/sbin/nginx", "-c", "/etc/nginx/nginx.conf"]
